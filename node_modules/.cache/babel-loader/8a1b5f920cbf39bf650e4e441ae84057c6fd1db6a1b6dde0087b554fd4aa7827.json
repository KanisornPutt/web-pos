{"ast":null,"code":"import axios from \"axios\";\nconst state = {\n  token: localStorage.getItem(\"token\") || null,\n  user: JSON.parse(localStorage.getItem(\"user\")) || null,\n  redirectUri: \"http://localhost:8020/redirect\",\n  responseType: \"code\",\n  storeData: JSON.parse(localStorage.getItem(\"storeData\")) || null\n};\nconst mutations = {};\nconst actions = {\n  async checkPassword({\n    state\n  }, payload) {\n    console.log(\"Checking password\");\n    const url = \"api/users/checkPassword/\" + state.user.userId; // Replace with your API endpoint\n    const token = state.token; // Replace with your actual Bearer token\n    const passwordRequest = payload;\n    try {\n      const response = await axios.post(url, passwordRequest, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n          \"Content-Type\": \"application/json\"\n        }\n      });\n      if (response.status === 200) {\n        return true;\n      } else if (response.status === 401) {\n        return false;\n      }\n    } catch (error) {\n      console.error(\"There was an error : \", error);\n      return false;\n    }\n  },\n  async updateUser({\n    commit\n  }, payload) {\n    console.log(\"updating user\");\n    const url = \"api/users/\" + state.user.userId; // Replace with your API endpoint\n    const token = state.token; // Replace with your actual Bearer token\n    const userChangeRequest = payload;\n    try {\n      const response = await axios.put(url, userChangeRequest, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n          \"Content-Type\": \"application/json\" // If you're sending JSON data\n        }\n      });\n      const userDto = response.data;\n      commit(\"auth/setUser\", userDto, {\n        root: true\n      });\n      return true;\n    } catch (error) {\n      console.error(\"There was an error : \", error);\n      return false;\n    }\n  },\n  async deleteUser({\n    state,\n    dispatch\n  }, payload) {\n    console.log(\"deleting user\");\n    const url = \"api/users/\" + state.user.userId; // Replace with your API endpoint\n    const token = state.token; // Replace with your actual Bearer token\n    const password = encodeURIComponent(payload.password);\n    try {\n      const response = await axios.delete(url, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n          \"Content-Type\": \"application/json\"\n        },\n        params: {\n          password: password\n        }\n      });\n      dispatch(\"auth/logout\", null, {\n        root: true\n      });\n      return true;\n    } catch (error) {\n      console.error(\"There was an error : \", error);\n      return false;\n    }\n  }\n};\nconst getters = {};\nexport default {\n  namespaced: true,\n  state,\n  mutations,\n  actions,\n  getters\n};","map":{"version":3,"names":["axios","state","token","localStorage","getItem","user","JSON","parse","redirectUri","responseType","storeData","mutations","actions","checkPassword","payload","console","log","url","userId","passwordRequest","response","post","headers","Authorization","status","error","updateUser","commit","userChangeRequest","put","userDto","data","root","deleteUser","dispatch","password","encodeURIComponent","delete","params","getters","namespaced"],"sources":["/Users/shane/Desktop/isc project/frontend/web-pos 3.0/src/store/modules/user.js"],"sourcesContent":["import axios from \"axios\";\n\nconst state = {\n  token: localStorage.getItem(\"token\") || null,\n  user: JSON.parse(localStorage.getItem(\"user\")) || null,\n  redirectUri: \"http://localhost:8020/redirect\",\n  responseType: \"code\",\n  storeData: JSON.parse(localStorage.getItem(\"storeData\")) || null,\n};\n\nconst mutations = {\n\n  \n};\n\nconst actions = {\n\n  async checkPassword({state}, payload) {\n    console.log(\"Checking password\");\n    const url = \"api/users/checkPassword/\" + state.user.userId; // Replace with your API endpoint\n    const token = state.token; // Replace with your actual Bearer token\n    const passwordRequest = payload;\n    try {\n      const response = await axios.post(url, passwordRequest, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n          \"Content-Type\": \"application/json\",\n        },\n      });\n      if (response.status === 200) {\n        return true;\n      } else if (response.status === 401) {\n        return false;\n      }\n    } catch (error) {\n      console.error(\"There was an error : \", error);\n      return false;\n    }\n  },\n\n  async updateUser({ commit }, payload) {\n    console.log(\"updating user\");\n    const url = \"api/users/\" + state.user.userId; // Replace with your API endpoint\n    const token = state.token; // Replace with your actual Bearer token\n    const userChangeRequest = payload;\n    try {\n      const response = await axios.put(url, userChangeRequest, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n          \"Content-Type\": \"application/json\", // If you're sending JSON data\n        },\n      });\n      const userDto = response.data;\n      commit(\"auth/setUser\", userDto, {root: true});\n      return true;\n    } catch (error) {\n      console.error(\"There was an error : \", error);\n      return false;\n    }\n  },\n\n\n  async deleteUser({state ,dispatch },payload) {\n    console.log(\"deleting user\");\n    const url = \"api/users/\" + state.user.userId; // Replace with your API endpoint\n    const token = state.token; // Replace with your actual Bearer token\n    const password = encodeURIComponent(payload.password);\n    try {\n      const response = await axios.delete(url, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n          \"Content-Type\": \"application/json\",\n        },\n        params: {\n          password: password,\n        },\n      });\n      dispatch(\"auth/logout\", null, {root: true});\n      return true;\n    } catch (error) {\n      console.error(\"There was an error : \", error);\n      return false;\n    }\n  }\n};\n\nconst getters = {\n\n};\n\nexport default {\n  namespaced: true,\n  state,\n  mutations,\n  actions,\n  getters,\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}