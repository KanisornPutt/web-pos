{"ast":null,"code":"import _objectSpread from \"/Users/shane/Desktop/isc project/frontend/web-pos 3.0/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport \"core-js/modules/es.array.every.js\";\nimport \"core-js/modules/es.array.fill.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.parse-int.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.replace.js\";\nimport \"core-js/modules/es.string.trim.js\";\nimport { computed, ref } from \"vue\";\nimport { useStore } from \"vuex\";\nimport bootstrapBundle from \"bootstrap/dist/js/bootstrap.bundle\";\nexport default {\n  props: [\"item\"],\n  setup: function setup(props) {\n    var store = useStore();\n    var cart = computed(function () {\n      return store.state.cart.cart;\n    });\n    var itemModal = ref(null);\n    var selectedOptions = ref(Array(props.item.options.length).fill(null));\n    var invalidMsg = ref(\"\");\n    var note = ref(\"\");\n    var amount = ref(1);\n    var item = props.item;\n    var imgSrc = computed(function () {\n      try {\n        return require(\"@/assets/\".concat(props.item.img));\n      } catch (e) {\n        console.error(\"Image not found: \".concat(props.item.img));\n        return \"\";\n      }\n    });\n    var isFormValid = computed(function () {\n      return selectedOptions.value.every(function (option) {\n        return option !== null;\n      });\n    });\n    var handleAddToCart = function handleAddToCart() {\n      if (isFormValid.value) {\n        var itemWithSelectedOptions = _objectSpread(_objectSpread({}, props.item), {}, {\n          selectedOptions: selectedOptions.value,\n          amount: amount.value,\n          note: note.value.trim()\n        });\n        store.commit('cart/addItemToCart', itemWithSelectedOptions);\n        closeModal();\n      } else {\n        invalidMsg.value = \"Please select all of the required options\";\n        console.log(invalidMsg.value);\n      }\n    };\n    var setAmount = function setAmount(load) {\n      amount.value = amount.value + load;\n      if (amount.value <= 0) amount.value = 0;\n      if (amount.value >= item.stock) amount.value = item.stock;\n    };\n    var handleAmountInput = function handleAmountInput(event) {\n      var inputValue = event.target.value;\n      inputValue = inputValue.replace(/\\D/g, \"\");\n      amount.value = parseInt(inputValue);\n      if (isNaN(amount.value)) amount.value = 0;\n      setAmount(0);\n    };\n    var closeModal = function closeModal() {\n      var modalElement = itemModal.value;\n      var modalInstance = bootstrapBundle.Modal.getInstance(modalElement);\n      selectedOptions.value = Array(props.item.options.length).fill(null);\n      amount.value = 1;\n      note.value = \"\";\n      if (modalInstance) {\n        modalInstance.hide();\n      }\n    };\n    return {\n      imgSrc: imgSrc,\n      handleAddToCart: handleAddToCart,\n      closeModal: closeModal,\n      handleAmountInput: handleAmountInput,\n      itemModal: itemModal,\n      selectedOptions: selectedOptions,\n      isFormValid: isFormValid,\n      amount: amount,\n      setAmount: setAmount,\n      note: note\n    };\n  }\n};","map":{"version":3,"names":["computed","ref","useStore","bootstrapBundle","props","setup","store","cart","state","itemModal","selectedOptions","Array","item","options","length","fill","invalidMsg","note","amount","imgSrc","require","concat","img","e","console","error","isFormValid","value","every","option","handleAddToCart","itemWithSelectedOptions","_objectSpread","trim","commit","closeModal","log","setAmount","load","stock","handleAmountInput","event","inputValue","target","replace","parseInt","isNaN","modalElement","modalInstance","Modal","getInstance","hide"],"sources":["/Users/shane/Desktop/isc project/frontend/web-pos 3.0/src/components/dashboard/ItemModal.vue"],"sourcesContent":["<template>\n  <div\n    class=\"modal fade modal-fullscreen-md-down\"\n    tabindex=\"-1\"\n    aria-labelledby=\"itemModalLabel\"\n    aria-hidden=\"true\"\n    ref=\"itemModal\"\n  >\n    <div class=\"modal-dialog modal-dialog-centered modal-dialog-scrollable\">\n      <div class=\"modal-content\">\n        <!-- Header -->\n        <div class=\"modal-header\">\n          <h1 class=\"modal-title fs-5\" id=\"itemModalLabel\">{{ item.name }}</h1>\n          <button\n            type=\"button\"\n            class=\"btn-close\"\n            data-bs-dismiss=\"modal\"\n            aria-label=\"Close\"\n          ></button>\n        </div>\n\n        <!-- Body -->\n        <div class=\"modal-body\">\n          <div class=\"row\">\n            <!-- Img -->\n            <div class=\"col-6\">\n              <img\n                :src=\"imgSrc\"\n                class=\"card-img-top fixed-img\"\n                :alt=\"item.name\"\n              />\n            </div>\n\n            <!-- Body -->\n            <div class=\"col-6\">\n              <h5 class=\"mb-0\">{{ item.name }}</h5>\n              <small class=\".fs-2 mt-0 mb-2\">{{ item.description }}</small>\n\n              <!-- Options -->\n              <div v-for=\"(o, index) in item.options\" :key=\"index\">\n                <p class=\"mt-2 mb-0\">\n                  {{ o.for }}\n                  <span class=\".fs-1 fw-light\" v-if=\"o.req\"> required </span>\n                </p>\n                <div v-for=\"choice in o.choices\" :key=\"choice\">\n                  <!-- Req implementation  -->\n                  <div class=\"form-check\">\n                    <input\n                      class=\"form-check-input\"\n                      type=\"radio\"\n                      :name=\"'option' + index\"\n                      :value=\"choice\"\n                      v-model=\"selectedOptions[index]\"\n                      required\n                    />\n                    <label class=\"form-check-label\">\n                      {{ choice }}\n                    </label>\n                  </div>\n                </div>\n              </div>\n\n              <!-- Notes Textbox -->\n              <p class=\"mt-2 mb-0\">Notes</p>\n              <textarea\n                class=\"border border-secondary mt-0\"\n                name=\"addons\"\n                id=\"addons\"\n                style=\"\n                  height: 5rem;\n                  width: 90%;\n                  m-2\n                \"\n                v-model=\"note\"\n              ></textarea>\n\n              <!-- Amount -->\n              <p class=\"mt-2 mb-1\">Amount</p>\n              <div\n                class=\"row justify-content-center align-items-center\"\n                style=\"width: 100%\"\n              >\n                <div class=\"col-3 text-start\">\n                  <button\n                    class=\"btn btn-outline-secondary\"\n                    @click=\"setAmount(-1)\"\n                  >\n                    <i class=\"bi bi-dash\"></i>\n                  </button>\n                </div>\n                <div class=\"col-6 text-center\">\n                  <textarea\n                    type=\"text\"\n                    class=\"form-control fw-bold ms-2\"\n                    v-model=\"amount\"\n                    style=\"height: 1rem\"\n                    @input=\"handleAmountInput\"\n                  ></textarea>\n                </div>\n                <div class=\"col-3 text-end\">\n                  <button\n                    class=\"btn btn-outline-secondary\"\n                    @click=\"setAmount(1)\"\n                  >\n                    <i class=\"bi bi-plus\"></i>\n                  </button>\n                </div>\n              </div>\n\n\n            </div>\n          </div>\n        </div>\n\n        <!-- Footer -->\n        <div class=\"modal-footer\">\n          <button type=\"button\" class=\"btn btn-secondary\" @click=\"closeModal\">\n            Close\n          </button>\n          <button\n            type=\"button\"\n            @click=\"handleAddToCart\"\n            class=\"btn btn-primary\"\n          >\n            Add to Cart\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { computed, ref } from \"vue\";\nimport { useStore } from \"vuex\";\nimport bootstrapBundle from \"bootstrap/dist/js/bootstrap.bundle\";\n\nexport default {\n  props: [\"item\"],\n  setup(props) {\n    const store = useStore();\n    const cart = computed(() => store.state.cart.cart);\n    const itemModal = ref(null);\n    const selectedOptions = ref(Array(props.item.options.length).fill(null));\n    const invalidMsg = ref(\"\");\n    const note = ref(\"\");\n    const amount = ref(1);\n    const item = props.item;\n\n    const imgSrc = computed(() => {\n      try {\n        return require(`@/assets/${props.item.img}`);\n      } catch (e) {\n        console.error(`Image not found: ${props.item.img}`);\n        return \"\";\n      }\n    });\n\n    const isFormValid = computed(() =>\n      selectedOptions.value.every((option) => option !== null)\n    );\n\n    const handleAddToCart = () => {\n      if (isFormValid.value) {\n        const itemWithSelectedOptions = {\n          ...props.item,\n          selectedOptions: selectedOptions.value,\n          amount: amount.value,\n          note: note.value.trim(),\n        };\n        store.commit('cart/addItemToCart', itemWithSelectedOptions)\n        closeModal();\n      } else {\n        invalidMsg.value = \"Please select all of the required options\";\n        console.log(invalidMsg.value);\n      }\n    };\n\n    const setAmount = (load) => {\n      amount.value = amount.value + load;\n      if (amount.value <= 0) amount.value = 0;\n      if (amount.value >= item.stock) amount.value = item.stock;\n    };\n\n    const handleAmountInput = (event) => {\n      let inputValue = event.target.value;\n      inputValue = inputValue.replace(/\\D/g, \"\");\n      amount.value = parseInt(inputValue);\n      if (isNaN(amount.value)) amount.value = 0;\n      setAmount(0);\n    };\n\n    const closeModal = () => {\n      const modalElement = itemModal.value;\n      const modalInstance = bootstrapBundle.Modal.getInstance(modalElement);\n      selectedOptions.value = Array(props.item.options.length).fill(null);\n      amount.value = 1;\n      note.value = \"\";\n      if (modalInstance) {\n        modalInstance.hide();\n      }\n    };\n\n    return {\n      imgSrc,\n      handleAddToCart,\n      closeModal,\n      handleAmountInput,\n      itemModal,\n      selectedOptions,\n      isFormValid,\n      amount,\n      setAmount,\n      note,\n    };\n  },\n};\n</script>\n\n<style>\n.fixed-img {\n  width: 100%;\n  height: 300px;\n  object-fit: cover;\n}\n.form-check-input:invalid {\n  border-color: red;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}