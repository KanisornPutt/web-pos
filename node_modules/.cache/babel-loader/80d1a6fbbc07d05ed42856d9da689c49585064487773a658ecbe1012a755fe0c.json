{"ast":null,"code":"import { computed, onMounted, ref } from \"vue\";\nimport { useStore } from \"vuex\";\nimport bootstrapBundle from 'bootstrap/dist/js/bootstrap.bundle';\nexport default {\n  emits: [\"toggleContent\"],\n  setup(props, {\n    emit\n  }) {\n    const store = useStore();\n    const user = computed(() => store.getters[\"auth/user\"]);\n    const storeData = computed(() => store.getters[\"auth/storeData\"]);\n    const firstname = ref(user.value.firstname);\n    const lastname = ref(user.value.lastname);\n    const showName = ref(user.value.showName);\n    const password = ref(\"\");\n    const errorMsg = ref(\"\");\n    const toggleContent = () => {\n      emit(\"toggleContent\");\n    };\n    const saveChanges = () => {\n      const userChangeRequest = {\n        firstname: firstname.value,\n        lastname: lastname.value,\n        showName: showName.value\n      };\n      store.dispatch(\"user/updateUser\", userChangeRequest);\n      emit(\"toggleContent\");\n    };\n    const leaveStore = () => {\n      store.dispatch(\"store/leaveStore\");\n    };\n    const deleteAccount = async () => {\n      const passwordRequest = {\n        password: password.value\n      };\n      try {\n        const validation = await store.dispatch(\"user/checkPassword\", passwordRequest);\n        if (validation) {\n          errorMsg.value = \"\";\n          const modalElement = document.getElementById(\"deleteAccountModal\");\n          const modal = bootstrapBundle.Modal.getInstance(modalElement);\n          modal.hide();\n          store.dispatch(\"user/deleteUser\", passwordRequest);\n        } else {\n          password.value = \"\";\n          errorMsg.value = \"Incorrect password\";\n        }\n      } catch (error) {\n        console.error(\"Error while checking password: \", error);\n        errorMsg.value = \"Error occurred while checking password\";\n      }\n    };\n    return {\n      user,\n      storeData,\n      toggleContent,\n      firstname,\n      lastname,\n      showName,\n      saveChanges,\n      leaveStore,\n      password,\n      deleteAccount,\n      errorMsg\n    };\n  }\n};","map":{"version":3,"names":["computed","onMounted","ref","useStore","bootstrapBundle","emits","setup","props","emit","store","user","getters","storeData","firstname","value","lastname","showName","password","errorMsg","toggleContent","saveChanges","userChangeRequest","dispatch","leaveStore","deleteAccount","passwordRequest","validation","modalElement","document","getElementById","modal","Modal","getInstance","hide","error","console"],"sources":["/Users/shane/Desktop/isc project/frontend/web-pos 3.0/src/components/profile/ProfileEdit.vue"],"sourcesContent":["<template>\n  <div class=\"row justify-content-center\">\n    <div\n      class=\"col-6 col-md-4 m-4 d-flex justify-content-center align-items-center\"\n    >\n      <img src=\"@/assets/null-user.png\" class=\"rounded-4\" alt=\"\" />\n    </div>\n    <div class=\"col-8 col-md-6 m-5 mb-0\">\n      <div class=\"row text-start\">\n        <div class=\"col-6\">\n          <h6 class=\"text-secondary\">Firstname</h6>\n          <input\n            type=\"text\"\n            class=\"border border-secondary rounded-1\"\n            v-model=\"firstname\"\n            style=\"width: 95%\"\n          />\n        </div>\n        <div class=\"col-6\">\n          <h6 class=\"text-secondary\">Lastname</h6>\n          <input\n            type=\"text\"\n            class=\"border border-secondary rounded-1\"\n            v-model=\"lastname\"\n            style=\"width: 95%\"\n          />\n        </div>\n      </div>\n      <div class=\"text-start my-3\">\n        <h6 class=\"text-secondary\">Username</h6>\n        <input\n          type=\"text\"\n          class=\"border border-secondary rounded-1\"\n          v-model=\"showName\"\n          style=\"width: 95%\"\n        />\n      </div>\n      <div class=\"text-start my-3\">\n        <h6 class=\"text-secondary\">Email</h6>\n        <h5>{{ user.email }}</h5>\n      </div>\n      <div class=\"text-start my-3\">\n        <h6 class=\"text-secondary\">Store</h6>\n        <div class=\"d-flex align-items-center\" v-if=\"user.storeId\">\n          <h5 class=\"mb-0 me-3\">{{ storeData.name }}</h5>\n          <button\n            type=\"button\"\n            class=\"btn btn-danger\"\n            data-bs-toggle=\"modal\"\n            data-bs-target=\"#leavingStoreModal\"\n          >\n            Leave Store\n          </button>\n        </div>\n\n        <!-- Leaving Store Modal -->\n        <div\n          class=\"modal fade\"\n          id=\"leavingStoreModal\"\n          tabindex=\"-1\"\n          aria-labelledby=\"leavingStorelebal\"\n          aria-hidden=\"true\"\n        >\n          <div class=\"modal-dialog modal-dialog-centered\">\n            <div class=\"modal-content\">\n              <div class=\"modal-header\">\n                <h1 class=\"modal-title fs-5\" id=\"leavingStoreLabel\">\n                  Leaving Store\n                </h1>\n                <button\n                  type=\"button\"\n                  class=\"btn-close\"\n                  data-bs-dismiss=\"modal\"\n                  aria-label=\"Close\"\n                ></button>\n              </div>\n              <div class=\"modal-body\">\n                <h4>Are you sure?</h4>\n                <p>This process cannot be undone.</p>\n              </div>\n              <div class=\"modal-footer\">\n                <button\n                  type=\"button\"\n                  class=\"btn btn-secondary\"\n                  data-bs-dismiss=\"modal\"\n                >\n                  cancel\n                </button>\n                <button\n                  type=\"button\"\n                  class=\"btn btn-danger\"\n                  data-bs-dismiss=\"modal\"\n                  @click=\"leaveStore\"\n                >\n                  Yes, I'm sure.\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div v-if=\"!user.storeId\">\n          <h5>No Store</h5>\n          <a class=\"btn btn-lg btn-orange text-light\" href=\"/storeSetup\"\n            >Link to One Now</a\n          >\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <!-- Footer -->\n  <div class=\"row p-3\">\n    <div class=\"col-4 d-flex justify-content-start mb-4\">\n      <button\n        class=\"btn btn-danger text-light me-3\"\n        style=\"width: 9rem; height: 3rem\"\n        type=\"button\"\n        data-bs-toggle=\"modal\"\n        data-bs-target=\"#deleteAccountModal\"\n      >\n        Delete Account\n      </button>\n\n      <!-- Delete Account Modal -->\n      <div\n        class=\"modal fade\"\n        id=\"deleteAccountModal\"\n        tabindex=\"-1\"\n        aria-labelledby=\"deleteAccountModal\"\n        aria-hidden=\"true\"\n      >\n        <div class=\"modal-dialog modal-dialog-centered\">\n          <div class=\"modal-content\">\n            <div class=\"modal-header\">\n              <h1 class=\"modal-title fs-5\" id=\"deleteAccountLabel\">\n                Deleting Account\n              </h1>\n              <button\n                type=\"button\"\n                class=\"btn-close\"\n                data-bs-dismiss=\"modal\"\n                aria-label=\"Close\"\n              ></button>\n            </div>\n            <div class=\"modal-body\">\n              <h4>Are you sure?</h4>\n              <p>This process cannot be undone.</p>\n              <h5>Please Enter Your Password to Continue</h5>\n              <input\n                type=\"password\"\n                class=\"border border-secondary rounded-1\"\n                v-model=\"password\"\n                style=\"width: 95%; font-size: 20px\"\n                required\n              />\n              <p class=\"text-danger\">{{ errorMsg }}</p>\n            </div>\n            <div class=\"modal-footer\">\n              <button\n                type=\"button\"\n                class=\"btn btn-secondary\"\n                data-bs-dismiss=\"modal\"\n              >\n                cancel\n              </button>\n              <button\n                type=\"button\"\n                class=\"btn btn-danger\"\n                @click=\"deleteAccount\"\n              >\n                Delete Account\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"col-8 d-flex justify-content-end mb-4\">\n      <!-- Move the button to a new row and align it to the right -->\n      <button\n        class=\"btn btn-secondary text-light me-3\"\n        style=\"width: 9rem; height: 3rem\"\n        @click=\"toggleContent\"\n      >\n        Discard Changes\n      </button>\n      <button\n        class=\"btn btn-success text-light me-3\"\n        style=\"width: 9rem; height: 3rem\"\n        @click=\"saveChanges\"\n      >\n        Save Changes\n      </button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { computed, onMounted, ref } from \"vue\";\nimport { useStore } from \"vuex\";\nimport bootstrapBundle from 'bootstrap/dist/js/bootstrap.bundle';\nexport default {\n  emits: [\"toggleContent\"],\n  setup(props, { emit }) {\n    const store = useStore();\n    const user = computed(() => store.getters[\"auth/user\"]);\n    const storeData = computed(() => store.getters[\"auth/storeData\"]);\n    const firstname = ref(user.value.firstname);\n    const lastname = ref(user.value.lastname);\n    const showName = ref(user.value.showName);\n    const password = ref(\"\");\n    const errorMsg = ref(\"\");\n\n    const toggleContent = () => {\n      emit(\"toggleContent\");\n    };\n\n    const saveChanges = () => {\n      const userChangeRequest = {\n        firstname: firstname.value,\n        lastname: lastname.value,\n        showName: showName.value,\n      };\n      store.dispatch(\"user/updateUser\", userChangeRequest);\n      emit(\"toggleContent\");\n    };\n\n    const leaveStore = () => {\n      store.dispatch(\"store/leaveStore\");\n    };\n\n    const deleteAccount = async () => {\n      const passwordRequest = {\n        password: password.value,\n      };\n      try {\n        const validation = await store.dispatch(\n          \"user/checkPassword\",\n          passwordRequest\n        );\n        if (validation) {\n          errorMsg.value = \"\";\n          const modalElement = document.getElementById(\"deleteAccountModal\");\n          const modal = bootstrapBundle.Modal.getInstance(modalElement);\n          modal.hide();\n          store.dispatch(\"user/deleteUser\", passwordRequest);\n          \n        } else {\n          password.value = \"\";\n          errorMsg.value = \"Incorrect password\";\n        }\n      } catch (error) {\n        console.error(\"Error while checking password: \", error);\n        errorMsg.value = \"Error occurred while checking password\";\n      }\n    };\n\n    return {\n      user,\n      storeData,\n      toggleContent,\n      firstname,\n      lastname,\n      showName,\n      saveChanges,\n      leaveStore,\n      password,\n      deleteAccount,\n      errorMsg,\n    };\n  },\n};\n</script>\n\n<style scoped>\ninput {\n  font-size: 20px;\n}\n</style>\n"],"mappings":"AAuMA,SAASA,QAAQ,EAAEC,SAAS,EAAEC,GAAE,QAAS,KAAK;AAC9C,SAASC,QAAO,QAAS,MAAM;AAC/B,OAAOC,eAAc,MAAO,oCAAoC;AAChE,eAAe;EACbC,KAAK,EAAE,CAAC,eAAe,CAAC;EACxBC,KAAKA,CAACC,KAAK,EAAE;IAAEC;EAAK,CAAC,EAAE;IACrB,MAAMC,KAAI,GAAIN,QAAQ,CAAC,CAAC;IACxB,MAAMO,IAAG,GAAIV,QAAQ,CAAC,MAAMS,KAAK,CAACE,OAAO,CAAC,WAAW,CAAC,CAAC;IACvD,MAAMC,SAAQ,GAAIZ,QAAQ,CAAC,MAAMS,KAAK,CAACE,OAAO,CAAC,gBAAgB,CAAC,CAAC;IACjE,MAAME,SAAQ,GAAIX,GAAG,CAACQ,IAAI,CAACI,KAAK,CAACD,SAAS,CAAC;IAC3C,MAAME,QAAO,GAAIb,GAAG,CAACQ,IAAI,CAACI,KAAK,CAACC,QAAQ,CAAC;IACzC,MAAMC,QAAO,GAAId,GAAG,CAACQ,IAAI,CAACI,KAAK,CAACE,QAAQ,CAAC;IACzC,MAAMC,QAAO,GAAIf,GAAG,CAAC,EAAE,CAAC;IACxB,MAAMgB,QAAO,GAAIhB,GAAG,CAAC,EAAE,CAAC;IAExB,MAAMiB,aAAY,GAAIA,CAAA,KAAM;MAC1BX,IAAI,CAAC,eAAe,CAAC;IACvB,CAAC;IAED,MAAMY,WAAU,GAAIA,CAAA,KAAM;MACxB,MAAMC,iBAAgB,GAAI;QACxBR,SAAS,EAAEA,SAAS,CAACC,KAAK;QAC1BC,QAAQ,EAAEA,QAAQ,CAACD,KAAK;QACxBE,QAAQ,EAAEA,QAAQ,CAACF;MACrB,CAAC;MACDL,KAAK,CAACa,QAAQ,CAAC,iBAAiB,EAAED,iBAAiB,CAAC;MACpDb,IAAI,CAAC,eAAe,CAAC;IACvB,CAAC;IAED,MAAMe,UAAS,GAAIA,CAAA,KAAM;MACvBd,KAAK,CAACa,QAAQ,CAAC,kBAAkB,CAAC;IACpC,CAAC;IAED,MAAME,aAAY,GAAI,MAAAA,CAAA,KAAY;MAChC,MAAMC,eAAc,GAAI;QACtBR,QAAQ,EAAEA,QAAQ,CAACH;MACrB,CAAC;MACD,IAAI;QACF,MAAMY,UAAS,GAAI,MAAMjB,KAAK,CAACa,QAAQ,CACrC,oBAAoB,EACpBG,eACF,CAAC;QACD,IAAIC,UAAU,EAAE;UACdR,QAAQ,CAACJ,KAAI,GAAI,EAAE;UACnB,MAAMa,YAAW,GAAIC,QAAQ,CAACC,cAAc,CAAC,oBAAoB,CAAC;UAClE,MAAMC,KAAI,GAAI1B,eAAe,CAAC2B,KAAK,CAACC,WAAW,CAACL,YAAY,CAAC;UAC7DG,KAAK,CAACG,IAAI,CAAC,CAAC;UACZxB,KAAK,CAACa,QAAQ,CAAC,iBAAiB,EAAEG,eAAe,CAAC;QAEpD,OAAO;UACLR,QAAQ,CAACH,KAAI,GAAI,EAAE;UACnBI,QAAQ,CAACJ,KAAI,GAAI,oBAAoB;QACvC;MACF,EAAE,OAAOoB,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,iCAAiC,EAAEA,KAAK,CAAC;QACvDhB,QAAQ,CAACJ,KAAI,GAAI,wCAAwC;MAC3D;IACF,CAAC;IAED,OAAO;MACLJ,IAAI;MACJE,SAAS;MACTO,aAAa;MACbN,SAAS;MACTE,QAAQ;MACRC,QAAQ;MACRI,WAAW;MACXG,UAAU;MACVN,QAAQ;MACRO,aAAa;MACbN;IACF,CAAC;EACH;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}