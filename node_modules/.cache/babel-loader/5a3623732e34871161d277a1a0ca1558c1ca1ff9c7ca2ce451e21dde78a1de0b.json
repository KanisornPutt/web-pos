{"ast":null,"code":"import { computed, ref } from \"vue\";\nimport { useStore } from \"vuex\";\nexport default {\n  props: [\"itemId\"],\n  setup(props) {\n    const store = useStore();\n    const item = computed(() => {\n      return store.getters['cart/getItemFromCartById'](props.itemId);\n    });\n    const collapseId = ref(\"collapse-\" + props.itemId);\n    const collapseHref = ref(\"#collapse-\" + props.itemId);\n    const amount = ref(item.value.amount);\n    const setAmount = load => {\n      amount.value = amount.value + load;\n      if (amount.value <= 0) amount.value = 0;\n      if (amount.value >= item.stock) amount.value = item.stock;\n      item.value.amount = amount.value;\n    };\n    const handleAmountInput = event => {\n      let inputValue = event.target.value;\n      inputValue = inputValue.replace(/\\D/g, \"\");\n      amount.value = parseInt(inputValue);\n      if (isNaN(amount.value)) amount.value = 0;\n      setAmount(0);\n    };\n    const updateCart = () => {\n      amount.value = item.value.amount;\n      if (item.value.amount === 0) {\n        console.log('calling removeItemFromCart');\n        store.commit(\"cart/removeItemFromCart\", props.itemId);\n      }\n    };\n    return {\n      collapseHref,\n      collapseId,\n      amount,\n      setAmount,\n      handleAmountInput,\n      updateCart,\n      item\n    };\n  }\n};","map":{"version":3,"names":["computed","ref","useStore","props","setup","store","item","getters","itemId","collapseId","collapseHref","amount","value","setAmount","load","stock","handleAmountInput","event","inputValue","target","replace","parseInt","isNaN","updateCart","console","log","commit"],"sources":["/Users/shane/Desktop/isc project/frontend/web-pos 3.0/src/components/dashboard/itemInCart.vue"],"sourcesContent":["<template>\n  <div\n    class=\"container mb-2\"\n    data-bs-toggle=\"collapse\"\n    :href=\"collapseHref\"\n    role=\"button\"\n    @click=\"updateCart\"\n    aria-expanded=\"false\"\n    :aria-controls=\"collapseHref\"\n  >\n    <div class=\"row align-items-center\">\n      <div class=\"col-3\">\n        <p class=\"mb-0\">\n          x <span>{{ item.amount }}</span>\n        </p>\n      </div>\n      <div class=\"col-6\">\n        <p class=\"mb-0\">{{ item.name }}</p>\n      </div>\n      <div class=\"col-3\">\n        <p class=\"mb-0 text-end\">{{ item.price * item.amount }}</p>\n      </div>\n    </div>\n    <div class=\"row align-items-center\">\n      <div class=\"col-3\"></div>\n      <div class=\"col-9\">\n        <div v-for=\"(selection, i) in item.selectedOptions\" :key=\"i\">\n          <p class=\"fw-light my-0\">\n            - <span>{{ selection }}</span>\n          </p>\n        </div>\n        <p class=\"fw-light my-0\">{{ item.note }}</p>\n      </div>\n    </div>\n  </div>\n\n  <div class=\"collapse\" :id=\"collapseId\">\n    <div class=\"card card-body\">\n      <!-- Amount -->\n      <p class=\"mt-2 mb-1\">Amount</p>\n      <div\n        class=\"row justify-content-center align-items-center\"\n        style=\"width: 100%\"\n      >\n        <div class=\"col-3 text-start\">\n          <button class=\"btn btn-outline-secondary\" @click=\"setAmount(-1)\">\n            <i class=\"bi bi-dash\"></i>\n          </button>\n        </div>\n        <div class=\"col-6 text-center\">\n          <textarea\n            type=\"text\"\n            class=\"form-control fw-bold ms-2\"\n            v-model=\"amount\"\n            style=\"height: 1rem\"\n            @input=\"handleAmountInput\"\n          ></textarea>\n        </div>\n        <div class=\"col-3 text-end\">\n          <button class=\"btn btn-outline-secondary\" @click=\"setAmount(1)\">\n            <i class=\"bi bi-plus\"></i>\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { computed, ref } from \"vue\";\nimport { useStore } from \"vuex\";\nexport default {\n  props: [\"itemId\"],\n  setup(props) {\n    const store = useStore();\n    const item = computed(() => {\n      return store.getters['cart/getItemFromCartById'](props.itemId);\n    });\n    const collapseId = ref(\"collapse-\" + props.itemId);\n    const collapseHref = ref(\"#collapse-\" + props.itemId);\n    const amount = ref(item.value.amount);\n\n    const setAmount = (load) => {\n      amount.value = amount.value + load;\n      if (amount.value <= 0) amount.value = 0;\n      if (amount.value >= item.stock) amount.value = item.stock;\n      item.value.amount = amount.value;\n    };\n\n    const handleAmountInput = (event) => {\n      let inputValue = event.target.value;\n      inputValue = inputValue.replace(/\\D/g, \"\");\n      amount.value = parseInt(inputValue);\n      if (isNaN(amount.value)) amount.value = 0;\n      setAmount(0);\n    };\n\n    const updateCart = () => {\n    amount.value = item.value.amount\n      if (item.value.amount === 0) {\n        console.log('calling removeItemFromCart');\n        store.commit(\"cart/removeItemFromCart\", props.itemId);\n      }\n    };\n\n    return {\n      collapseHref,\n      collapseId,\n      amount,\n      setAmount,\n      handleAmountInput,\n      updateCart,\n      item,\n    };\n  },\n};\n</script>\n\n<style></style>\n"],"mappings":"AAqEA,SAASA,QAAQ,EAAEC,GAAE,QAAS,KAAK;AACnC,SAASC,QAAO,QAAS,MAAM;AAC/B,eAAe;EACbC,KAAK,EAAE,CAAC,QAAQ,CAAC;EACjBC,KAAKA,CAACD,KAAK,EAAE;IACX,MAAME,KAAI,GAAIH,QAAQ,CAAC,CAAC;IACxB,MAAMI,IAAG,GAAIN,QAAQ,CAAC,MAAM;MAC1B,OAAOK,KAAK,CAACE,OAAO,CAAC,0BAA0B,CAAC,CAACJ,KAAK,CAACK,MAAM,CAAC;IAChE,CAAC,CAAC;IACF,MAAMC,UAAS,GAAIR,GAAG,CAAC,WAAU,GAAIE,KAAK,CAACK,MAAM,CAAC;IAClD,MAAME,YAAW,GAAIT,GAAG,CAAC,YAAW,GAAIE,KAAK,CAACK,MAAM,CAAC;IACrD,MAAMG,MAAK,GAAIV,GAAG,CAACK,IAAI,CAACM,KAAK,CAACD,MAAM,CAAC;IAErC,MAAME,SAAQ,GAAKC,IAAI,IAAK;MAC1BH,MAAM,CAACC,KAAI,GAAID,MAAM,CAACC,KAAI,GAAIE,IAAI;MAClC,IAAIH,MAAM,CAACC,KAAI,IAAK,CAAC,EAAED,MAAM,CAACC,KAAI,GAAI,CAAC;MACvC,IAAID,MAAM,CAACC,KAAI,IAAKN,IAAI,CAACS,KAAK,EAAEJ,MAAM,CAACC,KAAI,GAAIN,IAAI,CAACS,KAAK;MACzDT,IAAI,CAACM,KAAK,CAACD,MAAK,GAAIA,MAAM,CAACC,KAAK;IAClC,CAAC;IAED,MAAMI,iBAAgB,GAAKC,KAAK,IAAK;MACnC,IAAIC,UAAS,GAAID,KAAK,CAACE,MAAM,CAACP,KAAK;MACnCM,UAAS,GAAIA,UAAU,CAACE,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC;MAC1CT,MAAM,CAACC,KAAI,GAAIS,QAAQ,CAACH,UAAU,CAAC;MACnC,IAAII,KAAK,CAACX,MAAM,CAACC,KAAK,CAAC,EAAED,MAAM,CAACC,KAAI,GAAI,CAAC;MACzCC,SAAS,CAAC,CAAC,CAAC;IACd,CAAC;IAED,MAAMU,UAAS,GAAIA,CAAA,KAAM;MACzBZ,MAAM,CAACC,KAAI,GAAIN,IAAI,CAACM,KAAK,CAACD,MAAK;MAC7B,IAAIL,IAAI,CAACM,KAAK,CAACD,MAAK,KAAM,CAAC,EAAE;QAC3Ba,OAAO,CAACC,GAAG,CAAC,4BAA4B,CAAC;QACzCpB,KAAK,CAACqB,MAAM,CAAC,yBAAyB,EAAEvB,KAAK,CAACK,MAAM,CAAC;MACvD;IACF,CAAC;IAED,OAAO;MACLE,YAAY;MACZD,UAAU;MACVE,MAAM;MACNE,SAAS;MACTG,iBAAiB;MACjBO,UAAU;MACVjB;IACF,CAAC;EACH;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}