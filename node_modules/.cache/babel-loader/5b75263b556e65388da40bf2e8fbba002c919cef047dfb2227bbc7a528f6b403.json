{"ast":null,"code":"import _defineProperty from \"/Users/shane/Desktop/isc project/frontend/web-pos 3.0/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _regeneratorRuntime from \"/Users/shane/Desktop/isc project/frontend/web-pos 3.0/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/shane/Desktop/isc project/frontend/web-pos 3.0/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.error.cause.js\";\nimport \"core-js/modules/es.error.to-string.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.date.to-json.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport axios from \"axios\";\nimport router from '@/router';\nimport SockJS from 'sockjs-client';\nimport { Client } from '@stomp/stompjs';\n//import Stomp from 'stompjs';\n\nvar state = {\n  token: '',\n  status: '',\n  stompClient: null,\n  user: JSON.parse(localStorage.getItem(\"user\")) || null,\n  clientId: \"38181892421-dcmv3r9nvnkbalt85nskg16qtlc8e7n5.apps.googleusercontent.com\",\n  redirectUri: \"http://localhost:8020/redirect\",\n  responseType: \"code\",\n  scope: \"email profile\",\n  // adjust scopes as needed\n  state: \"YOUR_STATE\",\n  // a random string to prevent CSRF attacks\n  storeData: JSON.parse(localStorage.getItem(\"storeData\")) || null\n};\nvar mutations = {\n  auth_request: function auth_request(state) {\n    state.status = \"loading\";\n  },\n  auth_success: function auth_success(state, payload) {\n    state.status = \"\";\n    state.token = payload.token;\n    state.user = payload.user;\n    localStorage.setItem(\"token\", payload.token);\n    localStorage.setItem(\"user\", JSON.stringify(payload.user));\n  },\n  setUser: function setUser(state, requestUser) {\n    state.user = requestUser;\n    localStorage.setItem(\"user\", JSON.stringify(requestUser));\n    if (!requestUser.storeId) {\n      localStorage.removeItem(\"storeData\");\n    }\n  },\n  setStore: function setStore(state, requestStore) {\n    state.storeData = requestStore;\n    localStorage.setItem(\"storeData\", JSON.stringify(requestStore));\n  },\n  auth_error: function auth_error(state) {\n    state.status = \"error\";\n  },\n  logout: function logout(state) {\n    state.status = \"\";\n    state.token = \"\";\n    state.user = null;\n    localStorage.removeItem(\"token\");\n    localStorage.removeItem(\"user\");\n    localStorage.removeItem(\"storeData\");\n  },\n  loginWithOAuth: function loginWithOAuth() {\n    console.log(\"oauth\");\n    var authUrl = \"https://accounts.google.com/o/oauth2/v2/auth?client_id=\".concat(state.clientId, \"&redirect_uri=\").concat(state.redirectUri, \"&response_type=\").concat(state.responseType, \"&scope=\").concat(state.scope, \"&state=\").concat(state.state);\n    window.location.href = authUrl;\n  },\n  setStompClient: function setStompClient(state, stompClient) {\n    state.stompClient = stompClient;\n  }\n};\nvar actions = _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({\n  connectWebSocket: function connectWebSocket(_ref) {\n    var commit = _ref.commit,\n      dispatch = _ref.dispatch;\n    var socket = new SockJS('/ws'); //create new socket connection to the websocket\n    var stompClient = new Client({\n      //new stomp client is created.\n      webSocketFactory: function webSocketFactory() {\n        return socket;\n      },\n      //webSocketFactory is used to provide the SockJs intance created earlier\n      onConnect: function onConnect() {\n        //this callback is executed when the websocket connection is successfully established\n        stompClient.subscribe('/topic/verification', function (message) {\n          //subscribe to a topic to receive real-time updates\n          var verificationMessage = JSON.parse(message.body);\n          //commit('setUserVerified', verificationMessage.isVerified);\n        });\n      },\n      onStompError: function onStompError(frame) {\n        console.error('Broker reported error: ' + frame.headers['message']);\n        console.error('Additional details: ' + frame.body); //The onStompError callback handles any errors reported by the STOMP broker, logging them to the console.\n      }\n    });\n    stompClient.activate(); //activate the stomp client\n    //commit('setStompClient', stompClient);\n  },\n  checkVerification: function checkVerification(_ref2, email) {\n    var state = _ref2.state;\n    //const message = { email: email };\n    state.stompClient.publish({\n      destination: '/app/check-verification',\n      email: email\n    });\n  }\n}, \"checkVerification\", function checkVerification(_ref3, email) {\n  var state = _ref3.state;\n  var message = {\n    email: email\n  };\n  state.stompClient.send('/app/check-verification', {}, JSON.stringify(message));\n}), \"register\", function register(_ref4, user) {\n  return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n    var commit, dispatch, response;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          commit = _ref4.commit, dispatch = _ref4.dispatch;\n          _context.prev = 1;\n          dispatch(\"connectWebSocket\");\n          commit(\"auth_request\");\n          _context.next = 6;\n          return axios.post(\"/api/v1/auth/getRegisterEmail\", user);\n        case 6:\n          response = _context.sent;\n          console.log(response);\n          return _context.abrupt(\"return\", response);\n        case 11:\n          _context.prev = 11;\n          _context.t0 = _context[\"catch\"](1);\n          throw _context.t0;\n        case 14:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[1, 11]]);\n  }))();\n}), \"login\", function login(_ref5, user) {\n  return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n    var commit, dispatch, response, token;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          commit = _ref5.commit, dispatch = _ref5.dispatch;\n          _context2.prev = 1;\n          commit(\"auth_request\");\n          _context2.next = 5;\n          return axios.post(\"/api/v1/auth/authenticate\", user);\n        case 5:\n          response = _context2.sent;\n          token = response.data.token;\n          dispatch(\"getUser\");\n          // axios.defaults.headers.common[\"Authorization\"] = `Bearer ${token}`;\n          // const userDetails = await axios.get(\"/api/users/\" + user.email, {\n          //   headers: {\n          //     Authorization: `Bearer ${token}`,\n          //   },\n          // });\n          // const userDto = userDetails.data;\n          //commit(\"auth_success\", { token, user: userDto });\n          return _context2.abrupt(\"return\", response);\n        case 11:\n          _context2.prev = 11;\n          _context2.t0 = _context2[\"catch\"](1);\n          commit(\"auth_error\");\n          localStorage.removeItem(\"token\");\n          delete axios.defaults.headers.common[\"Authorization\"];\n          throw _context2.t0;\n        case 17:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2, null, [[1, 11]]);\n  }))();\n}), \"oauth\", function oauth(_ref6, user) {\n  return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n    var commit, dispatch, response, token, userDetails, userDto;\n    return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          commit = _ref6.commit, dispatch = _ref6.dispatch;\n          _context3.prev = 1;\n          commit(\"auth_request\");\n          _context3.next = 5;\n          return axios.post(\"/api/v1/auth/oauth\", user);\n        case 5:\n          response = _context3.sent;\n          token = response.data.token;\n          _context3.next = 9;\n          return axios.get(\"/api/users/\" + user.email, {\n            headers: {\n              Authorization: \"Bearer \".concat(token)\n            }\n          });\n        case 9:\n          userDetails = _context3.sent;\n          userDto = userDetails.data;\n          console.log(\"UserDto : \", userDto);\n          commit(\"auth_success\", {\n            token: token,\n            user: userDto\n          });\n          return _context3.abrupt(\"return\", response);\n        case 16:\n          _context3.prev = 16;\n          _context3.t0 = _context3[\"catch\"](1);\n          console.log(_context3.t0);\n          if (!(_context3.t0.response.status === 403)) {\n            _context3.next = 24;\n            break;\n          }\n          commit(\"auth_error\");\n          throw new Error(\"oauth denied\");\n        case 24:\n          commit(\"auth_error\");\n          throw _context3.t0;\n        case 26:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3, null, [[1, 16]]);\n  }))();\n}), \"getUser\", function getUser(_ref7) {\n  return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n    var state, commit, url, response, userDto, getStoreUrl, _response;\n    return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n      while (1) switch (_context4.prev = _context4.next) {\n        case 0:\n          state = _ref7.state, commit = _ref7.commit;\n          url = \"/api/users/getsUserFromJwtToken\"; // Replace with your API endpoint\n          _context4.prev = 2;\n          _context4.next = 5;\n          return axios.get(url, {\n            withCredentials: true // Ensure cookies are sent with the request\n          });\n        case 5:\n          response = _context4.sent;\n          userDto = response.data;\n          commit(\"setUser\", userDto);\n          if (!userDto.storeId) {\n            _context4.next = 23;\n            break;\n          }\n          getStoreUrl = \"/api/stores/\" + state.user.storeId;\n          _context4.prev = 10;\n          _context4.next = 13;\n          return axios.get(getStoreUrl, {\n            withCredentials: true // Ensure cookies are sent with the request\n          });\n        case 13:\n          _response = _context4.sent;\n          commit(\"setStore\", _response.data);\n          _context4.next = 21;\n          break;\n        case 17:\n          _context4.prev = 17;\n          _context4.t0 = _context4[\"catch\"](10);\n          console.error(\"There was an error: \", _context4.t0);\n          if (_context4.t0.response && _context4.t0.response.status === 404) {\n            console.log(\"Store not found\");\n          }\n        case 21:\n          _context4.next = 24;\n          break;\n        case 23:\n          localStorage.removeItem(\"storeData\");\n        case 24:\n          _context4.next = 31;\n          break;\n        case 26:\n          _context4.prev = 26;\n          _context4.t1 = _context4[\"catch\"](2);\n          localStorage.removeItem(\"user\"); //todo remove all the local storage date\n          console.error(\"There was an error!\", _context4.t1);\n          throw _context4.t1;\n        case 31:\n        case \"end\":\n          return _context4.stop();\n      }\n    }, _callee4, null, [[2, 26], [10, 17]]);\n  }))();\n}), \"logout\", function logout(_ref8) {\n  return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5() {\n    var commit, response;\n    return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n      while (1) switch (_context5.prev = _context5.next) {\n        case 0:\n          commit = _ref8.commit;\n          commit(\"logout\");\n          _context5.prev = 2;\n          _context5.next = 5;\n          return axios.get(\"/api/logout\", {\n            withCredential: true\n          });\n        case 5:\n          response = _context5.sent;\n          _context5.next = 11;\n          break;\n        case 8:\n          _context5.prev = 8;\n          _context5.t0 = _context5[\"catch\"](2);\n          console.error(_context5.t0);\n        case 11:\n          //delete axios.defaults.headers.common[\"Authorization\"];\n          router.push(\"/\");\n        case 12:\n        case \"end\":\n          return _context5.stop();\n      }\n    }, _callee5, null, [[2, 8]]);\n  }))();\n});\nvar getters = {\n  isAuthenticated: function isAuthenticated(state) {\n    return !!state.user;\n  },\n  authStatus: function authStatus(state) {\n    return state.status;\n  },\n  showName: function showName(state) {\n    return state.user.showName;\n  },\n  user: function user(state) {\n    return state.user;\n  },\n  storeId: function storeId(state) {\n    return state.user.storeId;\n  },\n  storeData: function storeData(state) {\n    return state.storeData;\n  }\n};\nexport default {\n  namespaced: true,\n  state: state,\n  mutations: mutations,\n  actions: actions,\n  getters: getters\n};","map":{"version":3,"names":["axios","router","SockJS","Client","state","token","status","stompClient","user","JSON","parse","localStorage","getItem","clientId","redirectUri","responseType","scope","storeData","mutations","auth_request","auth_success","payload","setItem","stringify","setUser","requestUser","storeId","removeItem","setStore","requestStore","auth_error","logout","loginWithOAuth","console","log","authUrl","concat","window","location","href","setStompClient","actions","_defineProperty","connectWebSocket","_ref","commit","dispatch","socket","webSocketFactory","onConnect","subscribe","message","verificationMessage","body","onStompError","frame","error","headers","activate","checkVerification","_ref2","email","publish","destination","_ref3","send","register","_ref4","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","post","sent","abrupt","t0","stop","login","_ref5","_callee2","_callee2$","_context2","data","defaults","common","oauth","_ref6","_callee3","userDetails","userDto","_callee3$","_context3","get","Authorization","Error","getUser","_ref7","_callee4","url","getStoreUrl","_response","_callee4$","_context4","withCredentials","t1","_ref8","_callee5","_callee5$","_context5","withCredential","push","getters","isAuthenticated","authStatus","showName","namespaced"],"sources":["/Users/shane/Desktop/isc project/frontend/web-pos 3.0/src/store/modules/auth.js"],"sourcesContent":["import axios from \"axios\";\nimport router from '@/router'; \nimport SockJS from 'sockjs-client';\nimport { Client } from '@stomp/stompjs';\n//import Stomp from 'stompjs';\n\n\nconst state = {\n  token: '',\n  status: '',\n  stompClient: null,\n  user: JSON.parse(localStorage.getItem(\"user\")) || null,\n  clientId:\n    \"38181892421-dcmv3r9nvnkbalt85nskg16qtlc8e7n5.apps.googleusercontent.com\",\n  redirectUri: \"http://localhost:8020/redirect\",\n  responseType: \"code\",\n  scope: \"email profile\", // adjust scopes as needed\n  state: \"YOUR_STATE\", // a random string to prevent CSRF attacks\n  storeData: JSON.parse(localStorage.getItem(\"storeData\")) || null,\n};\n\nconst mutations = {\n  auth_request(state) {\n    state.status = \"loading\";\n  },\n  auth_success(state, payload) {\n    state.status = \"\";\n    state.token = payload.token;\n    state.user = payload.user;\n    localStorage.setItem(\"token\", payload.token);\n    localStorage.setItem(\"user\", JSON.stringify(payload.user));\n  },\n\n  setUser(state, requestUser) {\n    state.user = requestUser;\n    localStorage.setItem(\"user\", JSON.stringify(requestUser));\n    if (!requestUser.storeId) {\n      localStorage.removeItem(\"storeData\");\n    }\n  },\n\n  setStore(state, requestStore) {\n    state.storeData = requestStore;\n    localStorage.setItem(\"storeData\", JSON.stringify(requestStore));\n  },\n\n  auth_error(state) {\n    state.status = \"error\";\n  },\n  logout(state) {\n    state.status = \"\";\n    state.token = \"\";\n    state.user = null;\n    localStorage.removeItem(\"token\");\n    localStorage.removeItem(\"user\");\n    localStorage.removeItem(\"storeData\");\n  },\n  loginWithOAuth() {\n    console.log(\"oauth\");\n    const authUrl = `https://accounts.google.com/o/oauth2/v2/auth?client_id=${state.clientId}&redirect_uri=${state.redirectUri}&response_type=${state.responseType}&scope=${state.scope}&state=${state.state}`;\n    window.location.href = authUrl;\n  },\n  setStompClient(state, stompClient) {\n    state.stompClient = stompClient;\n  },\n};\n\nconst actions = {\n  connectWebSocket({ commit, dispatch }) {\n    const socket = new SockJS('/ws');//create new socket connection to the websocket\n    const stompClient = new Client({//new stomp client is created.\n      webSocketFactory: () => socket,//webSocketFactory is used to provide the SockJs intance created earlier\n      onConnect: () => {//this callback is executed when the websocket connection is successfully established\n        stompClient.subscribe('/topic/verification', message => {//subscribe to a topic to receive real-time updates\n          const verificationMessage = JSON.parse(message.body);\n          //commit('setUserVerified', verificationMessage.isVerified);\n        });\n      },\n      onStompError: (frame) => {\n        console.error('Broker reported error: ' + frame.headers['message']);\n        console.error('Additional details: ' + frame.body);//The onStompError callback handles any errors reported by the STOMP broker, logging them to the console.\n      },\n    });\n\n    stompClient.activate();//activate the stomp client\n    //commit('setStompClient', stompClient);\n  },\n  checkVerification({ state }, email) {\n    //const message = { email: email };\n    state.stompClient.publish({\n      destination: '/app/check-verification',\n      email: email,\n    });\n  },\n  checkVerification({ state }, email) {\n    const message = { email: email };\n    state.stompClient.send('/app/check-verification', {}, JSON.stringify(message));\n  },\n  async register({ commit, dispatch}, user) {\n    try {\n      dispatch(\"connectWebSocket\")\n      commit(\"auth_request\");\n      const response = await axios.post(\"/api/v1/auth/getRegisterEmail\", user);\n      console.log(response);\n      return response;\n    } catch (error) {\n      throw error;\n    }\n  },\n\n  // async register({ commit, dispatch}, user) {\n  //   try {\n  //     commit(\"auth_request\");\n  //     const response = await axios.post(\"/api/v1/auth/register\", user);\n  //     console.log(state.token)\n  //     dispatch(\"getUser\");\n  //     //const token = response.data.token;\n  //     return response;\n  //   } catch (error) {\n  //     throw error;\n  //   }\n  // },\n\n  async login({ commit, dispatch }, user) {\n    try {\n      commit(\"auth_request\");\n      const response = await axios.post(\"/api/v1/auth/authenticate\", user);\n      const token = response.data.token;\n      dispatch(\"getUser\");\n      // axios.defaults.headers.common[\"Authorization\"] = `Bearer ${token}`;\n      // const userDetails = await axios.get(\"/api/users/\" + user.email, {\n      //   headers: {\n      //     Authorization: `Bearer ${token}`,\n      //   },\n      // });\n      // const userDto = userDetails.data;\n      //commit(\"auth_success\", { token, user: userDto });\n      return response;\n    } catch (error) {\n      commit(\"auth_error\");\n      localStorage.removeItem(\"token\");\n      delete axios.defaults.headers.common[\"Authorization\"];\n      throw error;\n    }\n  },\n\n  async oauth({ commit, dispatch }, user) {\n    try {\n      commit(\"auth_request\");\n      const response = await axios.post(\"/api/v1/auth/oauth\", user);\n      const token = response.data.token;\n      const userDetails = await axios.get(\"/api/users/\" + user.email, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      });\n      const userDto = userDetails.data;\n      console.log(\"UserDto : \", userDto);\n      commit(\"auth_success\", { token, user: userDto });\n\n      return response;\n    } catch (error) {\n      console.log(error);\n      if (error.response.status === 403) {\n        commit(\"auth_error\");\n        throw new Error(\"oauth denied\");\n      } else {\n        commit(\"auth_error\");\n        throw error;\n      }\n    }\n  },\n\n  async getUser({ state, commit }) {\n\n    const url = \"/api/users/getsUserFromJwtToken\"; // Replace with your API endpoint\n  \n    try {\n      const response = await axios.get(url, {\n        withCredentials: true, // Ensure cookies are sent with the request\n      });\n      const userDto = response.data;\n      commit(\"setUser\", userDto);\n  \n      if (userDto.storeId) {\n        const getStoreUrl = \"/api/stores/\" + state.user.storeId;\n  \n        try {\n          const response = await axios.get(getStoreUrl, {\n            withCredentials: true, // Ensure cookies are sent with the request\n          });\n          commit(\"setStore\", response.data);\n        } catch (error) {\n          console.error(\"There was an error: \", error);\n          if (error.response && error.response.status === 404) {\n            console.log(\"Store not found\");\n          }\n        }\n      } else {\n        localStorage.removeItem(\"storeData\");\n      }\n    } catch (error) {\n      localStorage.removeItem(\"user\");//todo remove all the local storage date\n      console.error(\"There was an error!\", error);\n      throw error;\n    }\n  },\n\n\n  async logout({ commit }) {\n    commit(\"logout\");\n    try{\n      const response = await axios.get(\"/api/logout\",{\n        withCredential: true,\n      });\n    }catch(error){\n      console.error(error);\n    }\n    //delete axios.defaults.headers.common[\"Authorization\"];\n    router.push(\"/\")\n  },\n};\n\nconst getters = {\n  isAuthenticated: (state) => !!state.user,\n  authStatus: (state) => state.status,\n  showName: (state) => state.user.showName,\n  user: (state) => state.user,\n  storeId: (state) => state.user.storeId,\n  storeData: (state) => state.storeData,\n};\n\nexport default {\n  namespaced: true,\n  state,\n  mutations,\n  actions,\n  getters,\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}