{"ast":null,"code":"import _regeneratorRuntime from \"/Users/shane/Desktop/isc project/frontend/web-pos 3.0/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/shane/Desktop/isc project/frontend/web-pos 3.0/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport axios from \"axios\";\nvar state = {\n  token: localStorage.getItem(\"token\") || null,\n  user: JSON.parse(localStorage.getItem(\"user\")) || null,\n  redirectUri: \"http://localhost:8020/redirect\",\n  responseType: \"code\",\n  storeData: JSON.parse(localStorage.getItem(\"storeData\")) || null\n};\nvar mutations = {};\nvar actions = {\n  checkPassword: function checkPassword(_ref, payload) {\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      var state, url, token, passwordRequest, response;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            state = _ref.state;\n            console.log(\"Checking password\");\n            url = \"api/users/checkPassword/\" + state.user.userId; // Replace with your API endpoint\n            token = state.token; // Replace with your actual Bearer token\n            passwordRequest = payload;\n            _context.prev = 5;\n            _context.next = 8;\n            return axios.post(url, passwordRequest, {\n              headers: {\n                Authorization: \"Bearer \".concat(token),\n                \"Content-Type\": \"application/json\"\n              }\n            });\n          case 8:\n            response = _context.sent;\n            if (!(response.status === 200)) {\n              _context.next = 13;\n              break;\n            }\n            return _context.abrupt(\"return\", true);\n          case 13:\n            if (!(response.status === 401)) {\n              _context.next = 15;\n              break;\n            }\n            return _context.abrupt(\"return\", false);\n          case 15:\n            _context.next = 21;\n            break;\n          case 17:\n            _context.prev = 17;\n            _context.t0 = _context[\"catch\"](5);\n            console.error(\"There was an error : \", _context.t0);\n            return _context.abrupt(\"return\", false);\n          case 21:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee, null, [[5, 17]]);\n    }))();\n  },\n  updateUser: function updateUser(_ref2, payload) {\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n      var commit, url, token, userChangeRequest, response, userDto;\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) switch (_context2.prev = _context2.next) {\n          case 0:\n            commit = _ref2.commit;\n            console.log(\"updating user\");\n            url = \"api/users/\" + state.user.userId; // Replace with your API endpoint\n            token = state.token; // Replace with your actual Bearer token\n            userChangeRequest = payload;\n            _context2.prev = 5;\n            _context2.next = 8;\n            return axios.put(url, userChangeRequest, {\n              headers: {\n                Authorization: \"Bearer \".concat(token),\n                \"Content-Type\": \"application/json\" // If you're sending JSON data\n              }\n            });\n          case 8:\n            response = _context2.sent;\n            userDto = response.data;\n            commit(\"auth/setUser\", userDto, {\n              root: true\n            });\n            return _context2.abrupt(\"return\", true);\n          case 14:\n            _context2.prev = 14;\n            _context2.t0 = _context2[\"catch\"](5);\n            console.error(\"There was an error : \", _context2.t0);\n            return _context2.abrupt(\"return\", false);\n          case 18:\n          case \"end\":\n            return _context2.stop();\n        }\n      }, _callee2, null, [[5, 14]]);\n    }))();\n  },\n  deleteUser: function deleteUser(_ref3, payload) {\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n      var state, dispatch, url, token, password, response;\n      return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n        while (1) switch (_context3.prev = _context3.next) {\n          case 0:\n            state = _ref3.state, dispatch = _ref3.dispatch;\n            console.log(\"deleting user\");\n            url = \"api/users/\" + state.user.userId; // Replace with your API endpoint\n            token = state.token; // Replace with your actual Bearer token\n            password = encodeURIComponent(payload.password);\n            _context3.prev = 5;\n            _context3.next = 8;\n            return axios[\"delete\"](url, {\n              headers: {\n                Authorization: \"Bearer \".concat(token),\n                \"Content-Type\": \"application/json\"\n              },\n              params: {\n                password: password\n              }\n            });\n          case 8:\n            response = _context3.sent;\n            dispatch(\"auth/logout\", null, {\n              root: true\n            });\n            return _context3.abrupt(\"return\", true);\n          case 13:\n            _context3.prev = 13;\n            _context3.t0 = _context3[\"catch\"](5);\n            console.error(\"There was an error : \", _context3.t0);\n            return _context3.abrupt(\"return\", false);\n          case 17:\n          case \"end\":\n            return _context3.stop();\n        }\n      }, _callee3, null, [[5, 13]]);\n    }))();\n  }\n};\nvar getters = {};\nexport default {\n  namespaced: true,\n  state: state,\n  mutations: mutations,\n  actions: actions,\n  getters: getters\n};","map":{"version":3,"names":["axios","state","token","localStorage","getItem","user","JSON","parse","redirectUri","responseType","storeData","mutations","actions","checkPassword","_ref","payload","_asyncToGenerator","_regeneratorRuntime","mark","_callee","url","passwordRequest","response","wrap","_callee$","_context","prev","next","console","log","userId","post","headers","Authorization","concat","sent","status","abrupt","t0","error","stop","updateUser","_ref2","_callee2","commit","userChangeRequest","userDto","_callee2$","_context2","put","data","root","deleteUser","_ref3","_callee3","dispatch","password","_callee3$","_context3","encodeURIComponent","params","getters","namespaced"],"sources":["/Users/shane/Desktop/isc project/frontend/web-pos 3.0/src/store/modules/user.js"],"sourcesContent":["import axios from \"axios\";\n\nconst state = {\n  token: localStorage.getItem(\"token\") || null,\n  user: JSON.parse(localStorage.getItem(\"user\")) || null,\n  redirectUri: \"http://localhost:8020/redirect\",\n  responseType: \"code\",\n  storeData: JSON.parse(localStorage.getItem(\"storeData\")) || null,\n};\n\nconst mutations = {\n\n  \n};\n\nconst actions = {\n\n  async checkPassword({state}, payload) {\n    console.log(\"Checking password\");\n    const url = \"api/users/checkPassword/\" + state.user.userId; // Replace with your API endpoint\n    const token = state.token; // Replace with your actual Bearer token\n    const passwordRequest = payload;\n    try {\n      const response = await axios.post(url, passwordRequest, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n          \"Content-Type\": \"application/json\",\n        },\n      });\n      if (response.status === 200) {\n        return true;\n      } else if (response.status === 401) {\n        return false;\n      }\n    } catch (error) {\n      console.error(\"There was an error : \", error);\n      return false;\n    }\n  },\n\n  async updateUser({ commit }, payload) {\n    console.log(\"updating user\");\n    const url = \"api/users/\" + state.user.userId; // Replace with your API endpoint\n    const token = state.token; // Replace with your actual Bearer token\n    const userChangeRequest = payload;\n    try {\n      const response = await axios.put(url, userChangeRequest, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n          \"Content-Type\": \"application/json\", // If you're sending JSON data\n        },\n      });\n      const userDto = response.data;\n      commit(\"auth/setUser\", userDto, {root: true});\n      return true;\n    } catch (error) {\n      console.error(\"There was an error : \", error);\n      return false;\n    }\n  },\n\n\n  async deleteUser({state ,dispatch },payload) {\n    console.log(\"deleting user\");\n    const url = \"api/users/\" + state.user.userId; // Replace with your API endpoint\n    const token = state.token; // Replace with your actual Bearer token\n    const password = encodeURIComponent(payload.password);\n    try {\n      const response = await axios.delete(url, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n          \"Content-Type\": \"application/json\",\n        },\n        params: {\n          password: password,\n        },\n      });\n      dispatch(\"auth/logout\", null, {root: true});\n      return true;\n    } catch (error) {\n      console.error(\"There was an error : \", error);\n      return false;\n    }\n  }\n};\n\nconst getters = {\n\n};\n\nexport default {\n  namespaced: true,\n  state,\n  mutations,\n  actions,\n  getters,\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}