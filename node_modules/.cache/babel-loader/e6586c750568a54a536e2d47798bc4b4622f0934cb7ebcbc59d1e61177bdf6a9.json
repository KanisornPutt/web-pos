{"ast":null,"code":"import { computed, ref } from \"vue\";\nimport { useStore } from \"vuex\";\nimport bootstrapBundle from \"bootstrap/dist/js/bootstrap.bundle\";\nexport default {\n  props: [\"item\"],\n  setup(props) {\n    const store = useStore();\n    const cart = computed(() => store.state.cart.cart);\n    const itemModal = ref(null);\n    const selectedOptions = ref(Array(props.item.options.length).fill(null));\n    const invalidMsg = ref(\"\");\n    const note = ref(\"\");\n    const amount = ref(1);\n    const item = props.item;\n    const imgSrc = computed(() => {\n      try {\n        return require(`@/assets/${props.item.img}`);\n      } catch (e) {\n        console.error(`Image not found: ${props.item.img}`);\n        return \"\";\n      }\n    });\n    const isFormValid = computed(() => selectedOptions.value.every(option => option !== null));\n    const handleAddToCart = () => {\n      if (isFormValid.value) {\n        const itemWithSelectedOptions = {\n          ...props.item,\n          selectedOptions: selectedOptions.value,\n          amount: amount.value,\n          note: note.value.trim()\n        };\n        store.commit('cart/addItemToCart', itemWithSelectedOptions);\n        closeModal();\n      } else {\n        invalidMsg.value = \"Please select all of the required options\";\n        console.log(invalidMsg.value);\n      }\n    };\n    const setAmount = load => {\n      amount.value = amount.value + load;\n      if (amount.value <= 0) amount.value = 0;\n      if (amount.value >= item.stock) amount.value = item.stock;\n    };\n    const handleAmountInput = event => {\n      let inputValue = event.target.value;\n      inputValue = inputValue.replace(/\\D/g, \"\");\n      amount.value = parseInt(inputValue);\n      if (isNaN(amount.value)) amount.value = 0;\n      setAmount(0);\n    };\n    const closeModal = () => {\n      const modalElement = itemModal.value;\n      const modalInstance = bootstrapBundle.Modal.getInstance(modalElement);\n      selectedOptions.value = Array(props.item.options.length).fill(null);\n      amount.value = 1;\n      note.value = \"\";\n      if (modalInstance) {\n        modalInstance.hide();\n      }\n    };\n    return {\n      imgSrc,\n      handleAddToCart,\n      closeModal,\n      handleAmountInput,\n      itemModal,\n      selectedOptions,\n      isFormValid,\n      amount,\n      setAmount,\n      note\n    };\n  }\n};","map":{"version":3,"names":["computed","ref","useStore","bootstrapBundle","props","setup","store","cart","state","itemModal","selectedOptions","Array","item","options","length","fill","invalidMsg","note","amount","imgSrc","require","img","e","console","error","isFormValid","value","every","option","handleAddToCart","itemWithSelectedOptions","trim","commit","closeModal","log","setAmount","load","stock","handleAmountInput","event","inputValue","target","replace","parseInt","isNaN","modalElement","modalInstance","Modal","getInstance","hide"],"sources":["/Users/shane/Desktop/isc project/frontend/web-pos 3.0/src/components/dashboard/ItemModal.vue"],"sourcesContent":["<template>\n  <div\n    class=\"modal fade modal-fullscreen-md-down\"\n    tabindex=\"-1\"\n    aria-labelledby=\"itemModalLabel\"\n    aria-hidden=\"true\"\n    ref=\"itemModal\"\n  >\n    <div class=\"modal-dialog modal-dialog-centered modal-dialog-scrollable\">\n      <div class=\"modal-content\">\n        <!-- Header -->\n        <div class=\"modal-header\">\n          <h1 class=\"modal-title fs-5\" id=\"itemModalLabel\">{{ item.name }}</h1>\n          <button\n            type=\"button\"\n            class=\"btn-close\"\n            data-bs-dismiss=\"modal\"\n            aria-label=\"Close\"\n          ></button>\n        </div>\n\n        <!-- Body -->\n        <div class=\"modal-body\">\n          <div class=\"row\">\n            <!-- Img -->\n            <div class=\"col-6\">\n              <img\n                :src=\"imgSrc\"\n                class=\"card-img-top fixed-img\"\n                :alt=\"item.name\"\n              />\n            </div>\n\n            <!-- Body -->\n            <div class=\"col-6\">\n              <h5 class=\"mb-0\">{{ item.name }}</h5>\n              <small class=\".fs-2 mt-0 mb-2\">{{ item.description }}</small>\n\n              <!-- Options -->\n              <div v-for=\"(o, index) in item.options\" :key=\"index\">\n                <p class=\"mt-2 mb-0\">\n                  {{ o.for }}\n                  <span class=\".fs-1 fw-light\" v-if=\"o.req\"> required </span>\n                </p>\n                <div v-for=\"choice in o.choices\" :key=\"choice\">\n                  <!-- Req implementation  -->\n                  <div class=\"form-check\">\n                    <input\n                      class=\"form-check-input\"\n                      type=\"radio\"\n                      :name=\"'option' + index\"\n                      :value=\"choice\"\n                      v-model=\"selectedOptions[index]\"\n                      required\n                    />\n                    <label class=\"form-check-label\">\n                      {{ choice }}\n                    </label>\n                  </div>\n                </div>\n              </div>\n\n              <!-- Notes Textbox -->\n              <p class=\"mt-2 mb-0\">Notes</p>\n              <textarea\n                class=\"border border-secondary mt-0\"\n                name=\"addons\"\n                id=\"addons\"\n                style=\"\n                  height: 5rem;\n                  width: 90%;\n                  m-2\n                \"\n                v-model=\"note\"\n              ></textarea>\n\n              <!-- Amount -->\n              <p class=\"mt-2 mb-1\">Amount</p>\n              <div\n                class=\"row justify-content-center align-items-center\"\n                style=\"width: 100%\"\n              >\n                <div class=\"col-3 text-start\">\n                  <button\n                    class=\"btn btn-outline-secondary\"\n                    @click=\"setAmount(-1)\"\n                  >\n                    <i class=\"bi bi-dash\"></i>\n                  </button>\n                </div>\n                <div class=\"col-6 text-center\">\n                  <textarea\n                    type=\"text\"\n                    class=\"form-control fw-bold ms-2\"\n                    v-model=\"amount\"\n                    style=\"height: 1rem\"\n                    @input=\"handleAmountInput\"\n                  ></textarea>\n                </div>\n                <div class=\"col-3 text-end\">\n                  <button\n                    class=\"btn btn-outline-secondary\"\n                    @click=\"setAmount(1)\"\n                  >\n                    <i class=\"bi bi-plus\"></i>\n                  </button>\n                </div>\n              </div>\n\n\n            </div>\n          </div>\n        </div>\n\n        <!-- Footer -->\n        <div class=\"modal-footer\">\n          <button type=\"button\" class=\"btn btn-secondary\" @click=\"closeModal\">\n            Close\n          </button>\n          <button\n            type=\"button\"\n            @click=\"handleAddToCart\"\n            class=\"btn btn-primary\"\n          >\n            Add to Cart\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { computed, ref } from \"vue\";\nimport { useStore } from \"vuex\";\nimport bootstrapBundle from \"bootstrap/dist/js/bootstrap.bundle\";\n\nexport default {\n  props: [\"item\"],\n  setup(props) {\n    const store = useStore();\n    const cart = computed(() => store.state.cart.cart);\n    const itemModal = ref(null);\n    const selectedOptions = ref(Array(props.item.options.length).fill(null));\n    const invalidMsg = ref(\"\");\n    const note = ref(\"\");\n    const amount = ref(1);\n    const item = props.item;\n\n    const imgSrc = computed(() => {\n      try {\n        return require(`@/assets/${props.item.img}`);\n      } catch (e) {\n        console.error(`Image not found: ${props.item.img}`);\n        return \"\";\n      }\n    });\n\n    const isFormValid = computed(() =>\n      selectedOptions.value.every((option) => option !== null)\n    );\n\n    const handleAddToCart = () => {\n      if (isFormValid.value) {\n        const itemWithSelectedOptions = {\n          ...props.item,\n          selectedOptions: selectedOptions.value,\n          amount: amount.value,\n          note: note.value.trim(),\n        };\n        store.commit('cart/addItemToCart', itemWithSelectedOptions)\n        closeModal();\n      } else {\n        invalidMsg.value = \"Please select all of the required options\";\n        console.log(invalidMsg.value);\n      }\n    };\n\n    const setAmount = (load) => {\n      amount.value = amount.value + load;\n      if (amount.value <= 0) amount.value = 0;\n      if (amount.value >= item.stock) amount.value = item.stock;\n    };\n\n    const handleAmountInput = (event) => {\n      let inputValue = event.target.value;\n      inputValue = inputValue.replace(/\\D/g, \"\");\n      amount.value = parseInt(inputValue);\n      if (isNaN(amount.value)) amount.value = 0;\n      setAmount(0);\n    };\n\n    const closeModal = () => {\n      const modalElement = itemModal.value;\n      const modalInstance = bootstrapBundle.Modal.getInstance(modalElement);\n      selectedOptions.value = Array(props.item.options.length).fill(null);\n      amount.value = 1;\n      note.value = \"\";\n      if (modalInstance) {\n        modalInstance.hide();\n      }\n    };\n\n    return {\n      imgSrc,\n      handleAddToCart,\n      closeModal,\n      handleAmountInput,\n      itemModal,\n      selectedOptions,\n      isFormValid,\n      amount,\n      setAmount,\n      note,\n    };\n  },\n};\n</script>\n\n<style>\n.fixed-img {\n  width: 100%;\n  height: 300px;\n  object-fit: cover;\n}\n.form-check-input:invalid {\n  border-color: red;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}